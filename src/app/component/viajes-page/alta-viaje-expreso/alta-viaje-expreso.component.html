<h2>Alta de Viaje Expreso</h2>
<form [formGroup]="form" (ngSubmit)="onSubmit()" class="expreso-form" novalidate>
    <mat-form-field appearance="fill">
        <mat-label>Ã“mnibus</mat-label>
        <mat-select formControlName="omnibusId" required>
            <mat-option [value]="null">-- Selecciona --</mat-option>
            <mat-option *ngFor="let bus of buses" [value]="bus.id">
                {{ bus.matricula }} (Capacidad: {{ bus.capacidad }})
            </mat-option>
        </mat-select>
        <mat-error *ngIf="getFieldError('omnibusId')">{{ getFieldError('omnibusId') }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Destino</mat-label>
        <mat-select formControlName="destinoId" required>
            <mat-option [value]="null">-- Selecciona --</mat-option>
            <mat-option *ngFor="let l of localidades" [value]="l.id">
                {{ l.nombre }} ({{ l.departamento }})
            </mat-option>
        </mat-select>
        <mat-error *ngIf="getFieldError('destinoId')">{{ getFieldError('destinoId') }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Fecha de salida</mat-label>
        <input matInput [matDatepicker]="pickerSalida" formControlName="fechaSalida" required>
        <mat-datepicker-toggle matSuffix [for]="pickerSalida"></mat-datepicker-toggle>
        <mat-datepicker #pickerSalida></mat-datepicker>
        <mat-error *ngIf="getFieldError('fechaSalida')">{{ getFieldError('fechaSalida') }}</mat-error>
    </mat-form-field>
    <mat-form-field appearance="fill">
        <mat-label>Hora de salida</mat-label>
        <mat-select formControlName="horaSalida" required>
            <mat-option *ngFor="let h of horas" [value]="h">{{ h }}</mat-option>
        </mat-select>
        <mat-error *ngIf="getFieldError('horaSalida')">{{ getFieldError('horaSalida') }}</mat-error>
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Fecha de llegada</mat-label>
        <input matInput [matDatepicker]="pickerLlegada" formControlName="fechaLlegada" required>
        <mat-datepicker-toggle matSuffix [for]="pickerLlegada"></mat-datepicker-toggle>
        <mat-datepicker #pickerLlegada></mat-datepicker>
        <mat-error *ngIf="getFieldError('fechaLlegada')">{{ getFieldError('fechaLlegada') }}</mat-error>
    </mat-form-field>
    <mat-form-field appearance="fill">
        <mat-label>Hora de llegada</mat-label>
        <mat-select formControlName="horaLlegada" required>
            <mat-option *ngFor="let h of horas" [value]="h">{{ h }}</mat-option>
        </mat-select>
        <mat-error *ngIf="getFieldError('horaLlegada')">{{ getFieldError('horaLlegada') }}</mat-error>
    </mat-form-field>

    <div class="expreso-actions">
        <button mat-flat-button color="primary" [disabled]="isLoading" type="submit">
            Registrar viaje
        </button>
        <button mat-stroked-button color="accent" type="button" (click)="close()">
            Cancelar
        </button>
    </div>
</form>