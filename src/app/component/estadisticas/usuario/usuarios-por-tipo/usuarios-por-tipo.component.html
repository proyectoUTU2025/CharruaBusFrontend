<h2 class="titulo">Estadísticas de cantidad de Usuarios</h2>

<div class="filtros">
    <button mat-button [disabled]="downloadingCsv" (click)="exportCsv()">
        {{ downloadingCsv ? 'Descargando CSV...' : 'Descargar CSV' }}
    </button>
    <button mat-button color="primary" (click)="exportPdf()">
        Descargar PDF
    </button>
</div>

<div class="grafico-container">
    <canvas baseChart
        [data]="{ labels: chartLabels, datasets: chartData }"
        [type]="chartType"
        [options]="chartOptions"
        height="250">
    </canvas>
</div>

<div class="tabla-container">
    <table mat-table [dataSource]="data">
        <ng-container matColumnDef="tipo">
            <th mat-header-cell *matHeaderCellDef (click)="toggleSort('tipo')">
                Tipo
                <span *ngIf="ordenarPor==='tipo'">{{ ascendente ? '↑' : '↓' }}</span>
            </th>
            <td mat-cell *matCellDef="let x">{{ x.tipo }}</td>
        </ng-container>

        <ng-container matColumnDef="cantidad">
            <th mat-header-cell *matHeaderCellDef (click)="toggleSort('cantidad')">
                Cantidad
                <span *ngIf="ordenarPor==='cantidad'">{{ ascendente ? '↑' : '↓' }}</span>
            </th>
            <td mat-cell *matCellDef="let x">{{ x.cantidad }}</td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="['tipo','cantidad']"></tr>
        <tr mat-row *matRowDef="let row; columns: ['tipo','cantidad']"></tr>
    </table>

    <mat-paginator
        [length]="total"
        [pageSize]="pageSize"
        [pageIndex]="pageIndex"
        (page)="pageChanged($event)">
    </mat-paginator>
</div>
