<form [formGroup]="filterForm" class="filters-container">
    <mat-form-field appearance="fill">
        <mat-label>Fecha de salida</mat-label>
        <input matInput formControlName="fechaHoraSalida" placeholder="YYYY-MM-DD HH:mm:ss" />
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Origen</mat-label>
        <mat-select formControlName="origenId">
            <mat-option [value]="''">Todos</mat-option>
            <mat-option *ngFor="let loc of localidades" [value]="loc.id">
                {{ loc.nombre }} ({{ loc.departamento }})
            </mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Destino</mat-label>
        <mat-select formControlName="destinoId">
            <mat-option [value]="''">Todos</mat-option>
            <mat-option *ngFor="let loc of localidades" [value]="loc.id">
                {{ loc.nombre }} ({{ loc.departamento }})
            </mat-option>
        </mat-select>
    </mat-form-field>

    <mat-form-field appearance="fill">
        <mat-label>Tipo de Movimiento</mat-label>
        <mat-select formControlName="tipoMovimientoOmnibus">
            <mat-option [value]="''">Todos</mat-option>
            <mat-option value="VIAJE">Viaje</mat-option>
            <mat-option value="EXPRESO">Expreso</mat-option>
            <mat-option value="INICIAL">Inicial</mat-option>
            <mat-option value="MANTENIMIENTO">Mantenimiento</mat-option>
        </mat-select>
    </mat-form-field>

    <button mat-flat-button color="primary" (click)="onSearch()" type="button">Buscar</button>
    <button mat-stroked-button (click)="onClear()" type="button">Limpiar</button>
</form>

<table mat-table [dataSource]="history" class="mat-elevation-z1">
    <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef> ID </th>
        <td mat-cell *matCellDef="let m"> {{ m.id }} </td>
    </ng-container>

    <ng-container matColumnDef="fechaHoraSalida">
        <th mat-header-cell *matHeaderCellDef> Salida </th>
        <td mat-cell *matCellDef="let m"> {{ m.fechaHoraSalida }} </td>
    </ng-container>

    <ng-container matColumnDef="fechaHoraLlegada">
        <th mat-header-cell *matHeaderCellDef> Llegada </th>
        <td mat-cell *matCellDef="let m"> {{ m.fechaHoraLlegada }} </td>
    </ng-container>

    <ng-container matColumnDef="origenNombre">
        <th mat-header-cell *matHeaderCellDef> Origen </th>
        <td mat-cell *matCellDef="let m"> {{ getNombreLocalidad(m.origenId, m) }} </td>
    </ng-container>


    <ng-container matColumnDef="destinoNombre">
        <th mat-header-cell *matHeaderCellDef> Destino </th>
        <td mat-cell *matCellDef="let m"> {{ getNombreLocalidad(m.destinoId, m) }} </td>
    </ng-container>


    <ng-container matColumnDef="tipoMovimientoOmnibus">
        <th mat-header-cell *matHeaderCellDef> Tipo </th>
        <td mat-cell *matCellDef="let m"> {{ m.tipoMovimientoOmnibus }} </td>
    </ng-container>


    <tr mat-header-row *matHeaderRowDef="columns"></tr>
    <tr mat-row *matRowDef="let row; columns: columns;"></tr>
</table>

<mat-paginator [length]="totalMovimientos" [pageSize]="pageSize" [pageSizeOptions]="[5, 10, 25]"
    (page)="onPageChange($event)" showFirstLastButtons>
</mat-paginator>