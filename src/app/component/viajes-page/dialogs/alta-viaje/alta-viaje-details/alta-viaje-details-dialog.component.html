<h2 mat-dialog-title>Alta de Viaje</h2>

<mat-horizontal-stepper [selectedIndex]="step" linear class="stepper">
  <mat-step label="Datos del viaje" [completed]="step>0"></mat-step>
  <mat-step label="Paradas" [completed]="step>1"></mat-step>
  <mat-step label="Seleccionar ómnibus" [completed]="step>2"></mat-step>
  <mat-step label="Confirmación"></mat-step>
</mat-horizontal-stepper>

<mat-dialog-content class="dialog-content">

  <div *ngIf="step === 2" class="step">
    <h3>3. Seleccionar ómnibus disponible</h3>
    <ng-container *ngIf="buses.length > 0; else sinBuses">
      <mat-selection-list [(ngModel)]="busSeleccionadoArray" (selectionChange)="onBusSeleccionadoChange()">
        <mat-list-option *ngFor="let bus of buses" [value]="bus">
          {{ bus.matricula }} - {{ bus.capacidad }} asientos
          ({{ bus.origenNombre }} → {{ bus.destinoNombre }})
        </mat-list-option>
      </mat-selection-list>
    </ng-container>
    <ng-template #sinBuses>
      <p>No hay ómnibus disponibles con esos criterios.</p>
    </ng-template>
  </div>

</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-stroked-button color="primary" (click)="cancelar()">Cancelar</button>
  <button mat-stroked-button color="primary" *ngIf="step > 0" (click)="anterior()">Anterior</button>
  <button mat-flat-button class="create-btn" *ngIf="step < 3" (click)="siguiente()"
    [disabled]="deberiaDeshabilitarSiguiente()">Siguiente</button>
  <button mat-flat-button class="create-btn" *ngIf="step === 3" (click)="confirmar()">Confirmar</button>
</mat-dialog-actions>